{% extends "layouts/layout.njk" %}

{% block content %}

<h1>{{ __('ma.view.medical_report_for', data.firstName + ' ' + data.lastName) }}</h1>
<div>{{ __('ma.view.date_of_birth') }}: {{ data.birthdate }} (XX years old)</div>

<h2>{{ __('ma.view.applicant_profile') }}</h2>

<h3>{{ __('ma.view.applicant') }}</h3>

<p>
  {{ __('ma.view.label.date_of_birth') }} {{ data.birthdate }} (XX years old)<br>
  {{ __('ma.view.label.sin') }} {{ data.socialInsuranceNumber }}<br>
  {{ __('ma.view.label.consent') }} <a href="">{{ __('ma.view.view_and_download_consent') }}</a><br>
  {{ __('ma.view.label.last_name_at_birth') }} {{ data.birthLastName }}<br>
  {{ __('ma.view.label.address') }} {{ data.address }}<br>
  {{ __('ma.view.label.phone') }} {{ data.telephone }}<br>
</p>

<h2>{{ __('ma.view.relationship_with_applicant') }}</h2>

<dl>
  <dt>{{ __('ma.view.label.first_visit') }}</dt>
  <dd>{{ data.relationshipStarted }}</dd>

  <dt>{{ __('ma.view.label.started_treating_condition') }}</dt>
  <dd>{{ data.firstTreatmentDate }}</dd>

  <dt>{{ __('ma.view.label.visits_in_past_year') }}</dt>
  <dd>{{ data.visitNumber }}</dd>

  <dt>{{ __('ma.view.label.last_visit') }}</dt>
  <dd>{{ data.lastVisitDate }}</dd>
</dl>

<h2 class="mt-4 text-4xl">{{ __('ma.view.medical_conditions_and_treatments') }}</h2>
<dl>
  <dt>{{ __('ma.view.label.current_weight') }}</dt>
  <dd>{{ data.weight }}</dd>


  <dt>{{ __('ma.view.label.current_height') }}</dt>
  <dd>{{ data.height }}</dd>


  <dt>{{ __('ma.view.label.bmi') }}</dt>
  <dd>[TODO]</dd>
</dl>

{% for condition in conditions %}
  <h3 class="mt-4">{{ condition.conditionName }}</h3>
  <dl>
    <dt>{{ __('ma.view.label.icd_code') }}</dt>
    <dd>{{ condition.icdCode }}</dd>
  
    <dt>{{ __('ma.view.label.symptoms_began') }}</dt>
    <dd>{{ condition.symptomsBegan }}</dd>
  
    <dt>{{ __('ma.view.label.symptom_frequency') }}</dt>
    <dd>{{ condition.symptomsOccur }}</dd>
  
    <dt>{{ __('ma.view.label.symptom_detail') }}</dt>
    <dd>{{ condition.symptomsOccurUnknown }}</dd>
  
    <dt>{{ __('ma.view.label.prognosis') }}</dt>
    <dd>{{ condition.conditionOutlook }}</dd>
  
    <dt>{{ __('ma.view.label.prognosis_detail') }}</dt>
    <dd>{{ condition.conditionOutlookUnknown }}</dd>
  
    <dt>{{ __('ma.view.label.clinical_findings') }}</dt>
    <dd>{{ condition.clinicallyImpair }}</dd>

    <dt>{{ __('ma.view.label.supporting_documents') }}</dt>
    <dd>[TODO]</dd>
  </dl>
  
  {% if condition.medications.length %}
    <h4 class="mt-4 text-2xl">Medications</h4>
    {% for medication in condition.medications %}
      <dl>
          <dt>{{ __('ma.view.label.medication') }}</dt>
          <dd>{{ medication.medicationName }}</dd>
        
          <dt>{{ __('ma.view.label.start_date') }}</dt>
          <dd>{{ medication.medicationStartDate }}</dd>
        
          <dt>{{ __('ma.view.label.end_date') }}</dt>
          <dd>{{ medication.medicationEndDate }}</dd>
        
          <dt>{{ __('ma.view.label.dosage') }}</dt>
          <dd>{{ medication.medicationDosage }}</dd>
        
          <dt>{{ __('ma.view.label.frequency') }}</dt>
          <dd>{{ medication.medicationFrequency }}</dd>
        
          <dt>{{ __('ma.view.label.patient_response') }}</dt>
          <dd>{{ medication.medicationResults }}</dd>
      </dl>
    {% endfor %}
  {% endif %}
  
  {% if condition.treatments.length %}
    <h4 class="mt-4 text-2xl">Treatments</h4>
    {% for treatment in condition.treatments %}
      <dl>
        <dt>{{ __('ma.view.label.treatment_type') }}</dt>
        <dd>{{ treatment.treatmentType }}</dd>

        <dt>{{ __('ma.view.label.start_date') }}</dt>
        <dd>{{ treatment.treatmentStartDate }}</dd>

        <dt>{{ __('ma.view.label.end_date') }}</dt>
        <dd>{{ treatment.treatmentEndDate }}</dd>

        <dt>{{ __('ma.view.label.frequency') }}</dt>
        <dd>{{ treatment.treatmentFrequency }}</dd>

        <dt>{{ __('ma.view.label.patient_response') }}</dt>
        <dd>{{ treatment.treatmentResults }}</dd>
      </dl>
    {% endfor %}
  {% endif %}

{% endfor %}

<h2 class="mt-4 text-4xl">{{ __('ma.view.work_capacity') }}</h2>

<dl>
  <dt>{{ __('ma.view.label.told_to_cease_work') }}</td>
  <dd>{{ data.stopWorking }}

  <dt>{{ __('ma.view.label.expected_to_return_to_work') }}
  <dd>{{ data.returnToWorkWhen }}

  <dt>{{ __('ma.view.label.type_of_work') }}</dt>
  <dd>{{ data.typeOfWork }}</dd>

  <dt>{{ __('ma.view.label.type_of_work_detail') }}</dt>
  <dd>{{ data.workDetails }}

  <dt>{{ __('ma.view.label.functional_limitations') }}</dt>
  <dd>{{ data.limitations }}</dd>

  <dt>{{ __('ma.view.label.future_treatments') }}</dt>
  <dd>{{ data.plannedTreatments }}</dd>
</dl>

{% endblock %}