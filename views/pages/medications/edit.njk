{% extends "layouts/layout.njk" %}

{% block scripts %}
    <script type="text/javascript" src="/build/assets/js/conditionAdder.js"></script>
{% endblock %}

{% block content %}
    {%- from 'pages/medications/medication-form.njk' import medicationForm with context -%}

    <h1>{{ __('medication.title') }}<br/> <span class="text-base">{{ __('patient_name')}} {{ patientName(data) }}</span></h1>

    <div>

        <form method="post">
            <input type="hidden" name="_csrf" value="{{ _csrf }}">

            {{ medicationForm(medication) }}

            <div class="w-full flex">
                <div class="w-1/3">
                    <button type="submit">{{ __('medications.save_medication') }}</button>
                </div>
                {% if data.medications %}
                    <div class="w-1/3 text-center">
                        <a class="button-link transparent" href="{{ route('medications') }}">{{ __('Cancel') }}</a>
                    </div>
                {% else %}
                    <div class="w-1/3 text-center">
                        <a class="button-link transparent" href="{{ route('treatments') }}">{{ __('skip_section') }}</a>
                    </div>
                {% endif %}
            </div>
        </form>
    </div>
{% endblock %}